<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danh sách yêu thích</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
</head>

<body>
<div th:replace="~{nguoiDung/navbar :: navbar}"></div>

<div class="container mt-4">
    <h2 class="text-center">Danh sách sản phẩm yêu thích</h2>

    <!-- Hiển thị thông báo nếu có -->
    <div th:if="${message}" class="alert alert-success text-center" role="alert" th:text="${message}"></div>

    <table id="favoritesTable" class="table table-bordered table-striped mt-3">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Ảnh</th>
            <th>Tên sản phẩm</th>
            <th>Kích Thước</th>
            <th>Giá</th>
            <th>Ngày thích</th>
            <th>Hành động</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="favorite : ${favorites}">
            <td th:text="${favorite.product.id}"></td>
            <td>
                <img th:src="@{'/uploads/' + ${favorite.product.hinh}}" alt="Ảnh sản phẩm" width="100">
            </td>
            <td th:text="${favorite.product.ten}"></td>
            <td th:text="${favorite.product.kichthuoc}"></td>
            <td th:text="${#numbers.formatDecimal(favorite.product.gia, 0, 'COMMA', 0, 'POINT')} + ' VND'"></td>
            <td th:text="${#dates.format(favorite.likedDate, 'dd/MM/yyyy')}"></td>
            <td>
                <a th:href="@{'/favorites/remove/' + ${favorite.product.id}}"
                   class="btn btn-danger btn-sm">Xóa</a>
            </td>
        </tr>
        </tbody>
    </table>

    <div class="text-center mt-3">
        <a href="/sanPham" class="btn btn-primary">Quay lại trang Sản Phẩm</a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<!-- jQuery & DataTables JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>

<script>
    $(document).ready(function () {
        $('#favoritesTable').DataTable({
            "paging": true,         // Phân trang
            "searching": true,      // Tìm kiếm
            "ordering": true,       // Sắp xếp
            "info": true,           // Hiển thị số lượng bản ghi
            "lengthMenu": [5, 10, 25, 50], // Số lượng hiển thị mỗi trang
            "language": {
                "search": "Tìm kiếm:",
                "lengthMenu": "Hiển thị _MENU_ mục",
                "info": "Hiển thị _START_ đến _END_ của _TOTAL_ mục",
                "paginate": {
                    "next": "Tiếp",
                    "previous": "Trước"
                }
            }
        });
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</body>
</html>
